{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'admin/css/adminlogin.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@500;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    
</head>
<body>
    <div id="container">
        <h1>THEATRE OWNER</h1>
        <form action="{% url 'theatreLogin' %}" method="POST">
        {% csrf_token %}
        <input type="text" id="mobile" name="number" placeholder="Mobile Number">
        <br>

        <button type="button" id="send" class="btn btn-secondary">Send OTP</button>
        <br>
        <input type="text" style="display: none;margin-left: 248px;" id="otp" name="otp" placeholder="Enter OTP">
        <br>
        <div>
            {% for message in messages %}
            <h4 style="color: red;">{{message}}</h4>
            {% endfor %}
        </div>
        
        <input type="submit" style="display: none;margin-left: 248px;" id="bt" value="Login">
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
</body>

<script>

var otphide = document.getElementById('otp');
var otpbt = document.getElementById('bt');

var id = document.getElementById('send');
id.addEventListener('click',function(){
    var mobile = document.getElementById('mobile').value;
    console.log(mobile)
    otphide.style.display='block'
    otpbt.style.display='block'
    id.style.display='none'
    $.ajax({
        
        url: '/mobile/',
        data: {
          'mobile': mobile,
        },
        dataType: 'json',
        success: function (data) {
            if (data) {
            alert("A user with this username already exists.");
          }
        }
      });

});

</script>

</html>